@model vlabver01.Models.PLC


@{
    ViewBag.Title = "Połączenie";
    Layout = "~/Views/Shared/_Layout.cshtml";
}




<br />
<div>
    <dl class="dl-horizontal">
        <dt>
            @Html.LabelFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.LabelFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.LabelFor(model => model.IPAddress)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.IPAddress)
        </dd>

        <dt>
            @Html.LabelFor(model => model.Port)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Port)
        </dd>

        <dt>
            Zdjęcie
        </dt>

        <dd>

            @if (Model.ImgPath != null)
            {
                string image = System.IO.Path.GetFileName(Model.ImgPath);
                string imagePath = "~/Content/plcimg/" + Model.Name + "/" + image;
                <img src="@Url.Content(imagePath)" alt="@Model.Name" />
            }
            else
            {
                <span>brak zdjęcia</span>
            }

        </dd>

    </dl>
    
         @* connect button i costam jeszcze jakies opcje ustawianie jakie inputy czytac itd ... *@
         @*
    @{
        var coils = Model.Read();
    }

    @foreach (var coil in coils)
    {
        <p>@coil</p>
    }
    *@

    <hr />

    @* // tu trzeba zrobic form
    <input type="text" name="startingAddress" />
    <input type="text" name="quantity" />

    @Html.ActionLink("odczyt", "Connect", "PLCController", new { startingAddress = 0, quantity = 0 }, new { @class = "btn btn-primary" })
    *@


    @*
        <form action="Read" method="post">


            <input type="hidden" name="id" value="@Model.Id" />

            <label>start:</label>
            <input type="text" name="startingAddress" />
            <br />
            <label>q:</label>
            <input type="text" name="quantity" />
            <br />
    *@

    
    <p> test read </p>

    @using (Html.BeginForm("Read", "PLC", FormMethod.Post, null))
    {
        @Html.AntiForgeryToken()

        <input type="hidden" name="id" value="@Model.Id" />

        <div class="form-group">
            @Html.Label("Adres początkowy", htmlAttributes: new { @class = "control-label col-md-12" })
            <div class="col-md-12">
                @Html.Editor("startingAddress", new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Ilość", htmlAttributes: new { @class = "control-label col-md-12" })
            <div class="col-md-12">
                @Html.Editor("quantity", new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-12">
                <input type="submit" value="Odczyt" class="btn btn-default" />
            </div>
        </div>
    }




    <p> read Q </p>

    @using (Html.BeginForm("Read", "PLC", FormMethod.Post, null))
    {
        @Html.AntiForgeryToken()
        
        <input type="hidden" name="id" value="@Model.Id" />
        <input type="hidden" name="functionN" value="1" />
        <div class="form-group">
            @Html.Label("Adres początkowy", htmlAttributes: new { @class = "control-label col-md-12" })
            <div class="col-md-12">
                @Html.Editor("startingAddress", new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Ilość", htmlAttributes: new { @class = "control-label col-md-12" })
            <div class="col-md-12">
                @Html.Editor("quantity", new { htmlAttributes = new { @class = "form-control" } })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-12">
                <input type="submit" value="Odczyt" class="btn btn-default" />
            </div>
        </div>
    }

</div>
